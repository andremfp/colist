import{w as P}from"../chunks/entry.Dqh1kYlX.js";import{s as D,n as I,c as $,o as Y,w as x,x as J,y as K,z as Q,A as X,b as ee,B as C}from"../chunks/scheduler.BRxxf2Ee.js";import{S as A,i as N,e as _,s as L,c as p,a as v,d as g,f as T,l as m,g as S,h as k,m as Z,k as te,r as H,y as re,v as w,w as se,u as E,E as ae,F as ne,A as B,B as U,C as R,D as q}from"../chunks/index.CxS-fQ88.js";import{d as j}from"../chunks/darkModeStore.CYBHSUnS.js";import{a as oe}from"../chunks/auth.mSZBj0ym.js";import{p as ie}from"../chunks/stores.cQIdjFTD.js";const O=P("forward");function le(r,e){switch(!0){case(r==="/"&&e==="/register"):case(r==="/"&&e==="/lists"):case(r==="/lists"&&e.startsWith("/lists/")):O.set("forward");break;case(r==="/register"&&e==="/"):case(r.startsWith("/lists/")&&e==="/lists"):O.set("backward");break}}function ce({url:r}){{const e=sessionStorage.getItem("currentPath")||"/";le(e,r.pathname),sessionStorage.setItem("currentPath",r.pathname)}return{path:r.pathname}}const Ie=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));function z(r){let e,s='<span class="ri-logout-box-r-line"></span>',a,t;return{c(){e=_("button"),e.innerHTML=s,this.h()},l(n){e=p(n,"BUTTON",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-1d5v5tc"&&(e.innerHTML=s),this.h()},h(){m(e,"class","text-xl cursor-pointer")},m(n,i){S(n,e,i),a||(t=Z(e,"click",r[3]),a=!0)},p:I,d(n){n&&g(e),a=!1,t()}}}function ue(r){let e,s,a,t,n,i,l,o=r[0]!=="/"&&r[0]!=="/register"&&z(r);return{c(){e=_("header"),s=_("div"),a=_("button"),t=_("span"),n=L(),o&&o.c(),this.h()},l(c){e=p(c,"HEADER",{class:!0});var u=v(e);s=p(u,"DIV",{class:!0});var h=v(s);a=p(h,"BUTTON",{class:!0});var b=v(a);t=p(b,"SPAN",{class:!0}),v(t).forEach(g),b.forEach(g),n=T(h),o&&o.l(h),h.forEach(g),u.forEach(g),this.h()},h(){m(t,"class",r[1]),m(a,"class","text-xl cursor-pointer"),m(s,"class","flex items-center space-x-4 ml-auto"),m(e,"class","flex justify-between items-center p-4 bg-main-bg-light dark:bg-main-bg-dark text-text-light dark:text-text-dark")},m(c,u){S(c,e,u),k(e,s),k(s,a),k(a,t),k(s,n),o&&o.m(s,null),i||(l=Z(a,"click",r[2]),i=!0)},p(c,[u]){u&2&&m(t,"class",c[1]),c[0]!=="/"&&c[0]!=="/register"?o?o.p(c,u):(o=z(c),o.c(),o.m(s,null)):o&&(o.d(1),o=null)},i:I,o:I,d(c){c&&g(e),o&&o.d(),i=!1,l()}}}function fe(r,e,s){let a,t,n;$(r,j,c=>s(4,t=c)),$(r,ie,c=>s(5,n=c));let i;Y(()=>{document.documentElement.classList.toggle("dark",t)});function l(){j.update(c=>{const u=!c;return localStorage.setItem("darkMode",u.toString()),document.documentElement.classList.toggle("dark",u),u})}async function o(){try{await oe()}catch(c){console.error("Error during logout:",c),alert("Logout failed. You have been logged out locally.")}finally{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/"}}return r.$$.update=()=>{r.$$.dirty&32&&s(0,i=n.url.pathname),r.$$.dirty&16&&s(1,a=t?"ri-moon-line":"ri-sun-line")},[i,a,l,o,t,n]}class de extends A{constructor(e){super(),N(this,e,fe,ue,D,{})}}function me(r){const e=r-1;return e*e*e+1}function F(r,{delay:e=0,duration:s=400,easing:a=me,x:t=0,y:n=0,opacity:i=0}={}){const l=getComputedStyle(r),o=+l.opacity,c=l.transform==="none"?"":l.transform,u=o*(1-i),[h,b]=x(t),[f,d]=x(n);return{delay:e,duration:s,easing:a,css:(y,M)=>`
			transform: ${c} translate(${(1-y)*h}${b}, ${(1-y)*f}${d});
			opacity: ${o-u*M}`}}function G(r){let e,s,a,t;const n=r[5].default,i=J(n,r,r[4],null);return{c(){e=_("div"),i&&i.c()},l(l){e=p(l,"DIV",{});var o=v(e);i&&i.l(o),o.forEach(g)},m(l,o){S(l,e,o),i&&i.m(e,null),t=!0},p(l,o){r=l,i&&i.p&&(!t||o&16)&&K(i,n,r,r[4],t?X(n,r[4],o,null):Q(r[4]),null)},i(l){t||(E(i,l),l&&ee(()=>{t&&(a&&a.end(1),s=ae(e,F,{x:200*r[2],duration:r[1],delay:r[1]}),s.start())}),t=!0)},o(l){w(i,l),s&&s.invalidate(),l&&(a=ne(e,F,{x:-200*r[2],duration:r[1]})),t=!1},d(l){l&&g(e),i&&i.d(l),l&&a&&a.end()}}}function ge(r){let e=r[0],s,a,t=G(r);return{c(){t.c(),s=H()},l(n){t.l(n),s=H()},m(n,i){t.m(n,i),S(n,s,i),a=!0},p(n,[i]){i&1&&D(e,e=n[0])?(re(),w(t,1,1,I),se(),t=G(n),t.c(),E(t,1),t.m(s.parentNode,s)):t.p(n,i)},i(n){a||(E(t),a=!0)},o(n){w(t),a=!1},d(n){n&&g(s),t.d(n)}}}function _e(r,e,s){let a,t;$(r,O,c=>s(3,t=c));let{$$slots:n={},$$scope:i}=e,{key:l}=e,{duration:o}=e;return r.$$set=c=>{"key"in c&&s(0,l=c.key),"duration"in c&&s(1,o=c.duration),"$$scope"in c&&s(4,i=c.$$scope)},r.$$.update=()=>{r.$$.dirty&8&&s(2,a=t==="forward"?1:-1)},[l,o,a,t,i,n]}class pe extends A{constructor(e){super(),N(this,e,_e,ge,D,{key:0,duration:1})}}function he(r){let e;const s=r[3].default,a=J(s,r,r[4],null);return{c(){a&&a.c()},l(t){a&&a.l(t)},m(t,n){a&&a.m(t,n),e=!0},p(t,n){a&&a.p&&(!e||n&16)&&K(a,s,t,t[4],e?X(s,t[4],n,null):Q(t[4]),null)},i(t){e||(E(a,t),e=!0)},o(t){w(a,t),e=!1},d(t){a&&a.d(t)}}}function ke(r){let e,s,a,t,n,i,l,o,c,u,h,b;return s=new de({}),n=new pe({props:{key:r[0].path,duration:200,$$slots:{default:[he]},$$scope:{ctx:r}}}),{c(){e=_("div"),B(s.$$.fragment),a=L(),t=_("main"),B(n.$$.fragment),i=L(),l=_("footer"),o=_("div"),c=_("a"),u=_("img"),this.h()},l(f){e=p(f,"DIV",{class:!0});var d=v(e);U(s.$$.fragment,d),a=T(d),t=p(d,"MAIN",{class:!0});var y=v(t);U(n.$$.fragment,y),y.forEach(g),i=T(d),l=p(d,"FOOTER",{class:!0});var M=v(l);o=p(M,"DIV",{class:!0});var V=v(o);c=p(V,"A",{href:!0});var W=v(c);u=p(W,"IMG",{src:!0,alt:!0,class:!0}),W.forEach(g),V.forEach(g),M.forEach(g),d.forEach(g),this.h()},h(){m(t,"class","flex-1 flex flex-col p-4 w-full max-w-4xl mx-auto box-border"),C(u.src,h=r[1])||m(u,"src",h),m(u,"alt","GitHub"),m(u,"class","w-8 h-8 object-contain"),m(c,"href","https://github.com/andremfp/colist"),m(o,"class","w-12 h-12 flex items-center justify-center"),m(l,"class","flex justify-center items-center p-3 sm:p-0"),m(e,"class","bg-main-bg-light dark:bg-main-bg-dark text-text-light dark:text-text-dark min-h-screen flex flex-col")},m(f,d){S(f,e,d),R(s,e,null),k(e,a),k(e,t),R(n,t,null),k(e,i),k(e,l),k(l,o),k(o,c),k(c,u),b=!0},p(f,[d]){const y={};d&1&&(y.key=f[0].path),d&16&&(y.$$scope={dirty:d,ctx:f}),n.$set(y),(!b||d&2&&!C(u.src,h=f[1]))&&m(u,"src",h)},i(f){b||(E(s.$$.fragment,f),E(n.$$.fragment,f),b=!0)},o(f){w(s.$$.fragment,f),w(n.$$.fragment,f),b=!1},d(f){f&&g(e),q(s),q(n)}}}function be(r,e,s){let a,t;$(r,j,o=>s(2,t=o));let{$$slots:n={},$$scope:i}=e,{data:l}=e;return Y(()=>{document.documentElement.classList.toggle("dark",t),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(o=>{console.log("Service Worker registered with scope:",o.scope)}).catch(o=>{console.error("Service Worker registration failed:",o)})})}),r.$$set=o=>{"data"in o&&s(0,l=o.data),"$$scope"in o&&s(4,i=o.$$scope)},r.$$.update=()=>{r.$$.dirty&4&&s(1,a=t?"/images/github_dark.svg":"/images/github_light.svg")},[l,a,t,n,i]}class $e extends A{constructor(e){super(),N(this,e,be,ke,D,{data:0})}}export{$e as component,Ie as universal};
