import{s as ye,n as ue,o as Ce,a as Ee,b as Le,r as ge,d as De}from"../chunks/scheduler.BRxxf2Ee.js";import{S as Ne,i as Ie,e as f,s as P,c as h,a as w,k as W,f as M,d as _,l as n,g as Z,h as s,m as R,t as Q,b as Y,n as le,o as he,p as Se,j as fe,q as Te}from"../chunks/index.CxS-fQ88.js";import{e as re,u as we,d as xe,s as Ve}from"../chunks/index.esm.CYeVeADr.js";import{g as de}from"../chunks/entry.Dqh1kYlX.js";import{a as Ae}from"../chunks/firebase.CIecg0m3.js";import{f as Oe,a as Ue,b as Be,d as Pe}from"../chunks/api.DQtzI3KZ.js";function _e(u,e,t){const a=u.slice();return a[24]=e[t],a}function be(u,e,t){const a=u.slice();return a[27]=e[t],a}function Me(u){let e,t="No lists available.";return{c(){e=f("p"),e.textContent=t,this.h()},l(a){e=h(a,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-ylk9qd"&&(e.textContent=t),this.h()},h(){n(e,"class","text-lg")},m(a,r){Z(a,e,r)},p:ue,d(a){a&&_(e)}}}function je(u){let e,t=[],a=new Map,r=re(u[1]);const o=l=>l[27].id;for(let l=0;l<r.length;l+=1){let c=be(u,r,l),i=o(c);a.set(i,t[l]=me(i,c))}return{c(){e=f("ul");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=h(l,"UL",{class:!0});var c=w(e);for(let i=0;i<t.length;i+=1)t[i].l(c);c.forEach(_),this.h()},h(){n(e,"class","space-y-2 overflow-hidden")},m(l,c){Z(l,e,c);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(l,c){c&3602&&(r=re(l[1]),t=we(t,c,o,1,l,r,a,e,xe,me,null,be))},d(l){l&&_(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function pe(u){let e,t="Shared";return{c(){e=f("small"),e.textContent=t,this.h()},l(a){e=h(a,"SMALL",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-k6a0jo"&&(e.textContent=t),this.h()},h(){n(e,"class","text-list-shared-light dark:text-list-shared-dark")},m(a,r){Z(a,e,r)},d(a){a&&_(e)}}}function me(u,e){let t,a,r,o,l,c,i,x,N=e[27].name+"",j,C,E,T,g,p=e[27].itemCount+"",b,v,I,L,H,q,V,F,D,d,k,O,S=e[27].sharedBy.length>0&&pe();function ee(...U){return e[12](e[27],...U)}function X(){return e[13](e[27])}function se(...U){return e[14](e[27],...U)}return{key:u,first:null,c(){t=f("li"),a=f("div"),r=f("button"),o=f("div"),l=f("span"),c=P(),i=f("div"),x=f("strong"),j=Q(N),C=P(),E=f("div"),S&&S.c(),T=P(),g=f("span"),b=Q(p),v=P(),I=f("span"),q=P(),V=f("button"),F=Q("Delete"),d=P(),this.h()},l(U){t=h(U,"LI",{class:!0});var A=w(t);a=h(A,"DIV",{class:!0,style:!0});var G=w(a);r=h(G,"BUTTON",{class:!0,"aria-label":!0});var J=w(r);o=h(J,"DIV",{class:!0});var m=w(o);l=h(m,"SPAN",{class:!0}),w(l).forEach(_),c=M(m),i=h(m,"DIV",{});var y=w(i);x=h(y,"STRONG",{class:!0});var B=w(x);j=Y(B,N),B.forEach(_),y.forEach(_),m.forEach(_),C=M(J),E=h(J,"DIV",{class:!0});var z=w(E);S&&S.l(z),T=M(z),g=h(z,"SPAN",{class:!0});var te=w(g);b=Y(te,p),te.forEach(_),v=M(z),I=h(z,"SPAN",{class:!0}),w(I).forEach(_),z.forEach(_),J.forEach(_),G.forEach(_),q=M(A),V=h(A,"BUTTON",{class:!0,style:!0,"aria-label":!0});var K=w(V);F=Y(K,"Delete"),K.forEach(_),d=M(A),A.forEach(_),this.h()},h(){n(l,"class","ri-list-check text-xl"),n(x,"class","text-lg font-semibold"),n(o,"class","flex items-center space-x-4"),n(g,"class","text-list-item-count-light dark:text-list-item-count-dark"),n(I,"class","ri-arrow-right-s-line text-xl"),n(E,"class","flex items-center space-x-4"),n(r,"class","w-full flex items-center justify-between p-4 text-left"),n(r,"aria-label",L=`View details of ${e[27].name}`),n(a,"class","flex items-center w-full transition-transform duration-300 ease-in-out"),n(a,"style",H=`transform: translateX(${e[4]===e[27].id?`-${$}px`:"0"});`),n(V,"class","delete-btn absolute top-0 bottom-0 right-0 py-1 px-4 text-white shadow-lg bg-delete-btn transition-transform duration-300 ease-in-out"),n(V,"style",D=`width: ${$}px; transform: translateX(${e[4]===e[27].id?"0":`${$}px`});`),n(V,"aria-label","Delete list"),n(t,"class","list-item relative flex items-center rounded-xl shadow-ios overflow-hidden bg-lists-bg-light dark:bg-lists-bg-dark"),this.first=t},m(U,A){Z(U,t,A),s(t,a),s(a,r),s(r,o),s(o,l),s(o,c),s(o,i),s(i,x),s(x,j),s(r,C),s(r,E),S&&S.m(E,null),s(E,T),s(E,g),s(g,b),s(E,v),s(E,I),s(t,q),s(t,V),s(V,F),s(t,d),k||(O=[R(r,"click",ee),R(V,"click",X),De(Ve.call(null,t,{timeframe:300,minSwipeDistance:60})),R(t,"swipe",se)],k=!0)},p(U,A){e=U,A&2&&N!==(N=e[27].name+"")&&fe(j,N),e[27].sharedBy.length>0?S||(S=pe(),S.c(),S.m(E,T)):S&&(S.d(1),S=null),A&2&&p!==(p=e[27].itemCount+"")&&fe(b,p),A&2&&L!==(L=`View details of ${e[27].name}`)&&n(r,"aria-label",L),A&18&&H!==(H=`transform: translateX(${e[4]===e[27].id?`-${$}px`:"0"});`)&&n(a,"style",H),A&18&&D!==(D=`width: ${$}px; transform: translateX(${e[4]===e[27].id?"0":`${$}px`});`)&&n(V,"style",D)},d(U){U&&_(t),S&&S.d(),k=!1,ge(O)}}}function ve(u){let e,t,a,r,o,l,c="Cancel",i,x,N="New List",j,C,E,T,g,p,b,v,I,L,H,q,V,F,D,d,k="None",O=[],S=new Map,ee,X,se='<svg class="w-4 h-4 text-input-border-light dark:text-input-text-dark" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 9l6 6 6-6"></path></svg>',U,A,G=re(u[2]);const J=m=>m[24].id;for(let m=0;m<G.length;m+=1){let y=_e(u,G,m),B=J(y);S.set(B,O[m]=ke(B,y))}return{c(){e=f("div"),t=f("div"),a=P(),r=f("div"),o=f("div"),l=f("button"),l.textContent=c,i=P(),x=f("h2"),x.textContent=N,j=P(),C=f("button"),E=Q("Done"),p=P(),b=f("form"),v=f("label"),I=Q(`List Name:
						`),L=f("input"),H=P(),q=f("label"),V=Q(`Share with:
						`),F=f("div"),D=f("select"),d=f("option"),d.textContent=k;for(let m=0;m<O.length;m+=1)O[m].c();ee=P(),X=f("div"),X.innerHTML=se,this.h()},l(m){e=h(m,"DIV",{class:!0});var y=w(e);t=h(y,"DIV",{class:!0}),w(t).forEach(_),a=M(y),r=h(y,"DIV",{class:!0});var B=w(r);o=h(B,"DIV",{class:!0});var z=w(o);l=h(z,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(l)!=="svelte-sescl"&&(l.textContent=c),i=M(z),x=h(z,"H2",{class:!0,"data-svelte-h":!0}),W(x)!=="svelte-b3b3b4"&&(x.textContent=N),j=M(z),C=h(z,"BUTTON",{class:!0,"aria-label":!0});var te=w(C);E=Y(te,"Done"),te.forEach(_),z.forEach(_),p=M(B),b=h(B,"FORM",{class:!0});var K=w(b);v=h(K,"LABEL",{class:!0});var ne=w(v);I=Y(ne,`List Name:
						`),L=h(ne,"INPUT",{type:!0,class:!0}),ne.forEach(_),H=M(K),q=h(K,"LABEL",{class:!0});var ie=w(q);V=Y(ie,`Share with:
						`),F=h(ie,"DIV",{class:!0});var ae=w(F);D=h(ae,"SELECT",{name:!0,class:!0});var oe=w(D);d=h(oe,"OPTION",{"data-svelte-h":!0}),W(d)!=="svelte-qtemz2"&&(d.textContent=k);for(let ce=0;ce<O.length;ce+=1)O[ce].l(oe);oe.forEach(_),ee=M(ae),X=h(ae,"DIV",{class:!0,"data-svelte-h":!0}),W(X)!=="svelte-wjpctf"&&(X.innerHTML=se),ae.forEach(_),ie.forEach(_),K.forEach(_),B.forEach(_),y.forEach(_),this.h()},h(){n(t,"class","bg-opacity-75 bg-black fixed inset-0 z-0"),n(l,"class","text-sm text-button-blue"),n(l,"aria-label","Cancel"),n(x,"class","text-xl font-semibold"),n(C,"class",T=`text-sm ${u[6]?"text-button-blue cursor-pointer":"text-button-disabled"}`),n(C,"aria-label","Done"),C.disabled=g=!u[6],n(o,"class","flex justify-between items-center mb-4"),n(L,"type","text"),L.required=!0,n(L,"class","mt-2 block w-full p-3 border rounded-md border-input-border-light dark:border-input-border-dark dark:bg-input-bg-dark dark:text-input-text-dark"),n(v,"class","block"),d.__value="None",le(d,d.__value),n(D,"name","users"),n(D,"class","mt-2 block w-full p-3 border rounded-md appearance-none border-input-border-light dark:border-input-border-dark dark:bg-input-bg-dark dark:text-input-text-dark"),u[5]===void 0&&Le(()=>u[17].call(D)),n(X,"class","absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"),n(F,"class","relative"),n(q,"class","block"),n(b,"class","space-y-4"),n(r,"class","relative z-10 p-6 border rounded-xl max-w-md w-full border-border-light bg-main-bg-light dark:border-border-dark dark:bg-main-bg-dark"),n(e,"class","fixed inset-0 z-50 flex items-center justify-center p-4")},m(m,y){Z(m,e,y),s(e,t),s(e,a),s(e,r),s(r,o),s(o,l),s(o,i),s(o,x),s(o,j),s(o,C),s(C,E),s(r,p),s(r,b),s(b,v),s(v,I),s(v,L),le(L,u[0]),s(b,H),s(b,q),s(q,V),s(q,F),s(F,D),s(D,d);for(let B=0;B<O.length;B+=1)O[B]&&O[B].m(D,null);he(D,u[5],!0),s(F,ee),s(F,X),U||(A=[R(l,"click",u[8]),R(C,"click",u[7]),R(L,"input",u[16]),R(D,"change",u[17]),R(b,"submit",Se(u[7]))],U=!0)},p(m,y){y&64&&T!==(T=`text-sm ${m[6]?"text-button-blue cursor-pointer":"text-button-disabled"}`)&&n(C,"class",T),y&64&&g!==(g=!m[6])&&(C.disabled=g),y&1&&L.value!==m[0]&&le(L,m[0]),y&4&&(G=re(m[2]),O=we(O,y,J,1,m,G,S,D,xe,ke,null,_e)),y&36&&he(D,m[5])},d(m){m&&_(e);for(let y=0;y<O.length;y+=1)O[y].d();U=!1,ge(A)}}}function ke(u,e){let t,a=e[24].name+"",r,o;return{key:u,first:null,c(){t=f("option"),r=Q(a),this.h()},l(l){t=h(l,"OPTION",{});var c=w(t);r=Y(c,a),c.forEach(_),this.h()},h(){t.__value=o=e[24].id,le(t,t.__value),this.first=t},m(l,c){Z(l,t,c),s(t,r)},p(l,c){e=l,c&4&&a!==(a=e[24].name+"")&&fe(r,a),c&4&&o!==(o=e[24].id)&&(t.__value=o,le(t,t.__value))},d(l){l&&_(t)}}}function Fe(u){let e,t,a="My Lists",r,o,l,c,i,x="Add List",N,j,C;function E(b,v){return b[1].length>0?je:Me}let T=E(u),g=T(u),p=u[3]&&ve(u);return{c(){e=f("div"),t=f("h1"),t.textContent=a,r=P(),o=f("div"),g.c(),l=P(),c=f("div"),i=f("button"),i.textContent=x,N=P(),p&&p.c(),this.h()},l(b){e=h(b,"DIV",{class:!0});var v=w(e);t=h(v,"H1",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-8wvu1c"&&(t.textContent=a),r=M(v),o=h(v,"DIV",{class:!0});var I=w(o);g.l(I),l=M(I),c=h(I,"DIV",{class:!0});var L=w(c);i=h(L,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(i)!=="svelte-cxh32x"&&(i.textContent=x),L.forEach(_),I.forEach(_),N=M(v),p&&p.l(v),v.forEach(_),this.h()},h(){n(t,"class","text-3xl font-bold mb-6"),n(i,"class","text-button-blue text-base"),n(i,"aria-label","Add new list"),n(c,"class","mt-4 flex justify-end"),n(o,"class","flex flex-col"),n(e,"class","p-4 bg-main-bg-light text-text-light dark:bg-main-bg-dark dark:text-text-dark")},m(b,v){Z(b,e,v),s(e,t),s(e,r),s(e,o),g.m(o,null),s(o,l),s(o,c),s(c,i),s(e,N),p&&p.m(e,null),j||(C=R(i,"click",u[15]),j=!0)},p(b,[v]){T===(T=E(b))&&g?g.p(b,v):(g.d(1),g=T(b),g&&(g.c(),g.m(o,l))),b[3]?p?p.p(b,v):(p=ve(b),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i:ue,o:ue,d(b){b&&_(e),g.d(),p&&p.d(),j=!1,C()}}}const $=100;function qe(u,e,t){let a,r=[],o=[],l="",c=!1,i=null,x="",N="None";Ce(()=>{Ae.onAuthStateChanged(j),document.addEventListener("click",I)}),Ee(()=>{typeof document<"u"&&(document.removeEventListener("click",I),document.removeEventListener("click",I))});async function j(d){d?(l=d.uid,await Promise.all([C(),E()])):(console.log("User not detected, redirecting to login"),de("/"))}async function C(){try{t(2,o=await Oe(l))}catch(d){console.error("Failed to fetch user profiles:",d)}}async function E(){try{t(1,r=await Ue()||[])}catch(d){console.error("Failed to fetch lists:",d)}}async function T(){if(x.trim())try{const k=await Be({name:x,ownerId:l,sharedBy:N!=="None"?[N,l]:[]});k&&(t(1,r=[...r,k]),g(),de(`/lists/${k.id}`))}catch(d){console.error("Failed to create list:",d)}}function g(){t(3,c=!1),t(0,x=""),t(5,N="None")}async function p(d){try{await Pe(d),t(1,r=r.filter(k=>k.id!==d)),t(4,i=null)}catch(k){console.error("Failed to delete list:",k)}}function b(d,k){d.detail.direction==="left"?t(4,i=k):d.detail.direction==="right"&&i===k&&t(4,i=null)}function v(d,k){if(i!==null){t(4,i=i!==k?null:i),d.preventDefault();return}de(`/lists/${k}`)}function I(d){const k=d.target;!k.closest(".list-item")&&!k.closest(".delete-btn")&&t(4,i=null)}const L=(d,k)=>v(k,d.id),H=d=>p(d.id),q=(d,k)=>b(k,d.id),V=()=>t(3,c=!0);function F(){x=this.value,t(0,x)}function D(){N=Te(this),t(5,N),t(2,o)}return u.$$.update=()=>{u.$$.dirty&1&&t(6,a=x.trim()!=="")},[x,r,o,c,i,N,a,T,g,p,b,v,L,H,q,V,F,D]}class Je extends Ne{constructor(e){super(),Ie(this,e,qe,Fe,ye,{})}}export{Je as component};
