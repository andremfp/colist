import{u as Y}from"./index.CxS-fQ88.js";import{r as X}from"./scheduler.BRxxf2Ee.js";function N(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function R(t,n){t.d(1),n.delete(t.key)}function W(t,n,s,a,u,h,e,y,E,w,g,f){let r=t.length,d=h.length,c=r;const v={};for(;c--;)v[t[c].key]=c;const p=[],i=new Map,A=new Map,H=[];for(c=d;c--;){const o=f(u,h,c),l=s(o);let m=e.get(l);m?H.push(()=>m.p(o,n)):(m=w(l,o),m.c()),i.set(l,p[c]=m),l in v&&A.set(l,Math.abs(c-v[l]))}const P=new Set,S=new Set;function D(o){Y(o,1),o.m(y,g),e.set(o.key,o),g=o.first,d--}for(;r&&d;){const o=p[d-1],l=t[r-1],m=o.key,M=l.key;o===l?(g=o.first,r--,d--):i.has(M)?!e.has(m)||P.has(m)?D(o):S.has(M)?r--:A.get(m)>A.get(M)?(S.add(m),D(o)):(P.add(M),r--):(E(l,e),r--)}for(;r--;){const o=t[r];i.has(o.key)||E(o,e)}for(;d;)D(p[d-1]);return X(H),p}const x=300,F=60,T="none";function _(t){return Array.isArray(t)?t:[t]}function I(t,n,s){return t.addEventListener(n,s),()=>t.removeEventListener(n,s)}function O(t,n){return n.filter(s=>t.pointerId!==s.pointerId)}function L(t,n,s,a,u){const h=t.getBoundingClientRect(),e=Math.round(s.clientX-h.left),y=Math.round(s.clientY-h.top);t.dispatchEvent(new CustomEvent(`${n}${u}`,{detail:{event:s,pointersCount:a.length,target:s.target,x:e,y}}))}function $(t,n,s,a,u,h=T){n.style.touchAction=_(h).join(" ");let e=[];function y(w){e.push(w),L(n,t,w,e,"down"),a==null||a(e,w);const g=w.pointerId;function f(i){g===i.pointerId&&(e=O(i,e),e.length||r(),L(n,t,i,e,"up"),u==null||u(e,i))}function r(){d(),c(),v(),p()}const d=I(n,"pointermove",i=>{e=e.map(A=>i.pointerId===A.pointerId?i:A),L(n,t,i,e,"move")}),c=I(n,"lostpointercapture",i=>{f(i)}),v=I(n,"pointerup",i=>{f(i)}),p=I(n,"pointerleave",i=>{e=[],r(),L(n,t,i,e,"up"),u==null||u(e,i)})}const E=I(n,"pointerdown",y);return{destroy:()=>{E()}}}function q(t,n){const s={timeframe:x,minSwipeDistance:F,touchAction:T,composed:!1,...n},a="swipe";let u,h,e,y;function E(g,f){h=f.clientX,e=f.clientY,u=Date.now(),g.length===1&&(y=f.target)}function w(g,f){if(f.type==="pointerup"&&g.length===0&&Date.now()-u<s.timeframe){const r=f.clientX-h,d=f.clientY-e,c=Math.abs(r),v=Math.abs(d);let p=null;c>=2*v&&c>s.minSwipeDistance?p=r>0?"right":"left":v>=2*c&&v>s.minSwipeDistance&&(p=d>0?"bottom":"top"),p&&t.dispatchEvent(new CustomEvent(a,{detail:{direction:p,target:y}}))}}return s.composed?{onMove:null,onDown:E,onUp:w}:$(a,t,null,E,w,s.touchAction)}export{R as d,N as e,q as s,W as u};
