<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/png" href="favicon-48x48.png" sizes="48x48" />
		<link rel="icon" type="image/svg+xml" href="favicon.svg" />
		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
		<meta name="apple-mobile-web-app-title" content="CoList" />
		<link rel="manifest" href="site.webmanifest" />
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
		<meta name="theme-color" content="#F0F0F0" />
		<meta name="background" content="#F0F0F0" />
		<script>
			// Set initial theme based on localStorage or system preference
			const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
			const storedTheme = localStorage.getItem('darkMode');

			// Function to update theme colors and class
			function updateTheme(isDark) {
				const themeColor = isDark ? '#1F1F1F' : '#F0F0F0';
				document.querySelector('meta[name="theme-color"]').content = themeColor;
				document.querySelector('meta[name="background"]').content = themeColor;

				if (isDark) {
					document.documentElement.classList.add('dark');
				} else {
					document.documentElement.classList.remove('dark');
				}
			}

			// Set initial theme
			if (storedTheme !== null) {
				// Use stored preference if it exists
				updateTheme(storedTheme === 'true');
			} else {
				// Otherwise use system preference
				updateTheme(darkModeMediaQuery.matches);
			}

			// Listen for system theme changes
			darkModeMediaQuery.addEventListener('change', (e) => {
				// Only update based on system preference if there's no stored preference
				if (localStorage.getItem('darkMode') === null) {
					updateTheme(e.matches);
				}
			});
		</script>
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
	</body>
</html>
